<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SmartMirror Health+ Pro | Futurista & ISO-compliant</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      background: linear-gradient(120deg, #0f2027 0%, #2c5364 100%);
      min-height: 100vh;
    }
    .glass {
      background: rgba(20, 30, 40, 0.7);
      backdrop-filter: blur(18px) saturate(1.3);
      -webkit-backdrop-filter: blur(18px) saturate(1.3);
      border-radius: 2rem;
      border: 1.5px solid rgba(80, 255, 255, 0.18);
      box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
    }
    .neon {
      box-shadow: 0 0 8px #00fff7, 0 0 24px #00fff7, 0 0 2px #fff;
      border: 1.5px solid #00fff7;
      background: linear-gradient(120deg, rgba(0,255,247,0.08) 0%, rgba(44,83,100,0.12) 100%);
    }
    .neon-text {
      color: #67e8f9;
      text-shadow: 0 0 8px #22d3ee, 0 0 16px #0ff, 0 0 2px #fff;
    }
    .badge-iso {
      background: rgba(0,255,247,0.12);
      border: 1px solid #00fff7;
      color: #00fff7;
      border-radius: 0.5rem;
      padding: 0.2rem 0.7rem;
      font-size: 0.95rem;
      margin-right: 0.5rem;
      cursor: pointer;
      position: relative;
      transition: background 0.2s;
    }
    .badge-iso:hover .tooltip {
      display: block;
    }
    .tooltip {
      display: none;
      position: absolute;
      bottom: 120%;
      left: 50%;
      transform: translateX(-50%);
      background: #232323;
      color: #fff;
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      font-size: 0.9rem;
      white-space: nowrap;
      z-index: 10;
      box-shadow: 0 2px 12px #00fff7aa;
    }
    .audit-overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(10,30,40,0.92);
      z-index: 50;
      display: none;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      animation: fadeIn 0.4s;
    }
    .audit-overlay.active {
      display: flex;
    }
    .blockchain-banner {
      background: linear-gradient(90deg, #00fff7 0%, #232323 100%);
      color: #232323;
      font-weight: 600;
      border-radius: 0.7rem;
      padding: 0.5rem 1.2rem;
      margin-bottom: 1rem;
      box-shadow: 0 0 12px #00fff788;
      display: flex;
      align-items: center;
      gap: 0.7rem;
      font-size: 1.1rem;
    }
    .iso-footer {
      margin-top: 2rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      font-size: 0.95rem;
      color: #67e8f9;
    }
    .glass-btn {
      background: rgba(0,255,247,0.10);
      border: 1px solid #00fff7;
      color: #00fff7;
      border-radius: 1.5rem;
      padding: 0.7rem 1.5rem;
      font-weight: 600;
      margin-top: 0.5rem;
      margin-bottom: 0.5rem;
      transition: background 0.2s, color 0.2s;
    }
    .glass-btn:hover {
      background: #00fff7;
      color: #232323;
    }
    .iso-wearable {
      background: rgba(0,255,247,0.08);
      border: 1px solid #00fff7;
      border-radius: 1rem;
      padding: 0.7rem 1.2rem;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.7rem;
      color: #67e8f9;
      font-size: 1.1rem;
    }
    @media (max-width: 900px) {
      .flex-col-md {
        flex-direction: column !important;
        align-items: stretch !important;
      }
    }
  </style>
</head>
<body class="font-sans antialiased text-cyan-100">
  <div class="w-full min-h-screen flex items-center justify-center py-10 bg-gradient-to-br from-black via-cyan-900 to-cyan-700 animate-pulse">
    <div class="flex flex-col md:flex-row flex-col-md gap-12 items-start justify-center w-full max-w-7xl px-4">
      <!-- Painel principal -->
      <main class="glass neon relative w-full max-w-xl p-8 flex flex-col gap-6 shadow-2xl">
        <div class="blockchain-banner" aria-label="Dados protegidos por blockchain">
          <svg width="22" height="22" fill="none" stroke="#232323" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M8 12l2 2 4-4"/></svg>
          Dados protegidos por Blockchain | GDPR & ISO 13485
        </div>
        <div class="flex items-center justify-between">
          <img src="REflexa.png" alt="REflexa Logo" class="w-32 h-16 object-contain" style="background:transparent;">
          <div id="clock" class="text-3xl font-bold neon-text" aria-live="polite">--:--</div>
        </div>
        <div class="grid grid-cols-2 gap-4 mt-2">
          <!-- Cards de m√©tricas com anima√ß√£o neon -->
          <div class="neon rounded-xl p-4 flex flex-col items-center" aria-label="An√°lise de Pele">
            <div class="font-semibold mb-1 neon-text">An√°lise de Pele</div>
            <img src="https://images.unsplash.com/photo-1517841905240-472988babdf9?auto=format&fit=facearea&w=256&h=256&facepad=2" alt="Skin" class="w-16 h-16 rounded-lg object-cover mb-2 ring-2 ring-cyan-400/40">
            <div class="text-xs w-full">
              Secura <span class="float-right text-cyan-300">72%</span><br>
              Pigmenta√ß√£o <span class="float-right text-cyan-300">59%</span><br>
              Linhas Finas <span class="float-right text-cyan-300">65%</span><br>
              Hidrata√ß√£o <span class="float-right text-cyan-200">85%</span>
            </div>
            <div class="text-[0.7rem] mt-2 text-cyan-400">An√°lise validada por ISO 62304</div>
          </div>
          <div class="neon rounded-xl p-4 flex flex-col items-center" aria-label="Postura e Movimento">
            <div class="font-semibold mb-1 neon-text">Postura</div>
            <div class="text-2xl mb-1 neon-text">üßç‚Äç‚ôÇÔ∏è</div>
            <div class="text-cyan-300 font-semibold">√ìtima</div>
            <div class="text-xs text-cyan-200 mt-1">Passos: 8.500</div>
            <div class="text-[0.7rem] mt-2 text-cyan-400">Monitoramento validado por ISO 62304</div>
          </div>
          <div class="neon rounded-xl p-4 flex flex-col items-center" aria-label="Batimento Card√≠aco">
            <div class="font-semibold mb-1 neon-text">Batimento Card√≠aco</div>
            <div class="text-xl text-cyan-400 mb-1 neon-text">‚ô•</div>
            <div class="text-lg font-bold text-cyan-100"><span id="bpm">72</span> <span class="text-base font-normal text-cyan-300">bpm</span></div>
            <div class="text-xs text-cyan-200">Variabilidade: <span id="variabilidade">Alta</span></div>
            <div class="text-[0.7rem] mt-2 text-cyan-400">Monitoramento validado por ISO 62304</div>
          </div>
          <div class="neon rounded-xl p-4 flex flex-col items-center" aria-label="Sono e Recupera√ß√£o">
            <div class="font-semibold mb-1 neon-text">Sono</div>
            <div class="text-xl text-cyan-300 mb-1 neon-text">üåô</div>
            <div class="text-lg font-bold text-cyan-100"><span id="sleep">7h 45m</span></div>
            <div class="text-xs text-cyan-200">Profundo: <span id="deepSleep">2h 15m</span></div>
            <div class="text-[0.7rem] mt-2 text-cyan-400">Monitoramento validado por ISO 62304</div>
          </div>
        </div>
        <div class="grid grid-cols-2 gap-4">
          <div class="neon rounded-xl p-4 flex flex-col items-center" aria-label="Humor e Bem-Estar">
            <div class="font-semibold mb-1 neon-text">Humor</div>
            <div class="text-xl text-cyan-300 mb-1 neon-text" id="moodIcon">üòä</div>
            <div class="text-lg font-bold text-cyan-100" id="moodText">Positivo</div>
            <div class="text-xs text-cyan-200">Baseado em an√°lise facial</div>
            <div class="text-[0.7rem] mt-2 text-cyan-400">An√°lise validada por ISO 62304</div>
          </div>
          <div class="neon rounded-xl p-4 flex flex-col items-center" aria-label="Nutri√ß√£o Sugerida">
            <div class="font-semibold mb-1 neon-text">Nutri√ß√£o</div>
            <div class="text-xl text-cyan-300 mb-1 neon-text">üçé</div>
            <div class="text-sm text-cyan-100" id="nutrition">Aveia com frutas</div>
            <div class="text-xs text-cyan-200">Sugest√£o personalizada</div>
            <div class="text-[0.7rem] mt-2 text-cyan-400">Sugest√£o validada por ISO 62304</div>
          </div>
        </div>
        <!-- Interoperabilidade com Wearables -->
        <div class="iso-wearable" aria-label="Interoperabilidade com Wearables">
          <svg width="22" height="22" fill="none" stroke="#00fff7" stroke-width="2" viewBox="0 0 24 24"><rect x="3" y="7" width="18" height="10" rx="3"/><path d="M7 7V5a5 5 0 0110 0v2"/></svg>
          <span>Wearable conectado via ISO/IEEE 11073</span>
          <span class="text-green-400 font-bold">‚óè</span>
          <span class="text-xs text-cyan-300">Smartwatch: 98 bpm | 7.2k passos</span>
        </div>
        <!-- Bot√µes interativos -->
        <div class="flex flex-wrap gap-2 mt-2">
          <button class="glass-btn" onclick="scanSkin()" aria-label=\"Escanear Pele\">Escanear Pele</button>
          <button class="glass-btn" onclick="monitorVitals()" aria-label=\"Monitorar Sinais Vitais">Monitorar Sinais Vitais</button>
          <button class="glass-btn" onclick="guidedWorkout()" aria-label=\"Iniciar Treino Guiado">Iniciar Treino Guiado</button>
          <button class="glass-btn" onclick="teleconsult()" aria-label=\"Teleconsulta">Teleconsulta</button>
          <button class="glass-btn" onclick="generateReport()" aria-label=\"Gerar Relat√≥rio">Gerar Relat√≥rio</button>
          <button class="glass-btn" onclick="analyzeMood()" aria-label=\"Analisar Humor">Analisar Humor</button>
          <button class="glass-btn" onclick="toggleAudit()" aria-label=\"Modo de Auditoria">Modo de Auditoria</button>
          <button class="glass-btn" onclick="generateFeedback()" aria-label=\"Relat√≥rio de Feedback">Relat√≥rio de Feedback</button>
        </div>
        <!-- Gr√°fico Chart.js -->
        <canvas id="healthChart" class="mt-6 bg-black/40 rounded-xl p-2"></canvas>
        <!-- Rodap√© de conformidade ISO -->
        <footer class="iso-footer">
          <span class="badge-iso" tabindex="0">ISO 13485
            <span class="tooltip">Certificado ISO 13485: Garantia de qualidade em todo o ciclo de vida do dispositivo.</span>
          </span>
          <span class="badge-iso" tabindex="0">ISO 14971
            <span class="tooltip">ISO 14971: Gerenciamento de riscos para dispositivos m√©dicos.</span>
          </span>
          <span class="badge-iso" tabindex="0">ISO 62304
            <span class="tooltip">ISO 62304: Ciclo de vida de software para dispositivos m√©dicos.</span>
          </span>
          <span class="badge-iso" tabindex="0">ISO/IEEE 11073
            <span class="tooltip">ISO/IEEE 11073: Comunica√ß√£o plug-and-play com sistemas de sa√∫de em casa.</span>
          </span>
          <span class="badge-iso" tabindex="0">ISO/TR 20416
            <span class="tooltip">ISO/TR 20416: Vigil√¢ncia p√≥s-mercado e feedback de uso.</span>
          </span>
        </footer>
      </main>
      <!-- Lado direito: funcionalidades e resultados -->
      <aside class="w-full max-w-md mt-8 md:mt-0">
        <div class="text-3xl font-extrabold text-cyan-400 mb-6 neon-text">Funcionalidades Futuristas</div>
        <ul class="text-lg text-cyan-100 leading-relaxed space-y-2">
          <li>Monitoramento de sa√∫de validado por ISO 62304</li>
          <li>Interoperabilidade plug-and-play com wearables (ISO/IEEE 11073)</li>
          <li>Gest√£o de riscos e alertas (ISO 14971)</li>
          <li>Relat√≥rios semanais e feedback p√≥s-mercado (ISO/TR 20416)</li>
          <li>Privacidade e seguran√ßa blockchain (GDPR & ISO 13485)</li>
          <li>Comandos por voz e acessibilidade ARIA</li>
        </ul>
        <div id="result" class="mt-8 bg-black/60 p-6 rounded-xl shadow-lg min-h-[120px] text-cyan-100"></div>
      </aside>
    </div>
  </div>
  <!-- Overlay de Auditoria ISO 14971 -->
  <div id="auditOverlay" class="audit-overlay" aria-modal="true" role="dialog">
    <div class="glass neon p-8 rounded-2xl max-w-lg w-full flex flex-col items-center">
      <h2 class="text-2xl font-bold neon-text mb-4">Modo de Auditoria (ISO 14971)</h2>
      <p class="mb-4 text-cyan-100 text-center">Monitoramento de riscos em tempo real. Probabilidade de falha em sensores e alertas cr√≠ticos.</p>
      <canvas id="riskChart" class="bg-black/40 rounded-xl p-2 mb-4"></canvas>
      <button class="glass-btn" onclick="toggleAudit()">Fechar Auditoria</button>
    </div>
  </div>
  <script>
    // Utilidades de dados randomizados e simula√ß√£o de conformidade ISO
    function randomInt(min, max) { return Math.floor(Math.random() * (max - min + 1)) + min; }
    function randomFloat(min, max, dec=1) { return (Math.random() * (max - min) + min).toFixed(dec); }
    function randomMood() {
      const moods = [
        {icon: 'üòä', text: 'Positivo'},
        {icon: 'üòê', text: 'Neutro'},
        {icon: 'üò∞', text: 'Estressado'},
        {icon: 'üò¥', text: 'Cansado'}
      ];
      return moods[randomInt(0, moods.length-1)];
    }
    // Rel√≥gio din√¢mico em tempo real
    function updateClock() {
      const now = new Date();
      document.getElementById('clock').textContent =
        now.toLocaleTimeString('pt-BR', {hour: '2-digit', minute: '2-digit', second: '2-digit'});
    }
    setInterval(updateClock, 1000); updateClock();

    // Simula√ß√£o de dados de sa√∫de e atualiza√ß√£o dos cards
    function updateHealthData() {
      document.getElementById('bpm').textContent = randomInt(60, 100);
      document.getElementById('variabilidade').textContent = ['Alta', 'M√©dia', 'Baixa'][randomInt(0,2)];
      document.getElementById('sleep').textContent = randomInt(6, 8) + 'h ' + randomInt(10, 59) + 'm';
      document.getElementById('deepSleep').textContent = randomInt(1, 3) + 'h ' + randomInt(0, 59) + 'm';
      const mood = randomMood();
      document.getElementById('moodIcon').textContent = mood.icon;
      document.getElementById('moodText').textContent = mood.text;
      document.getElementById('nutrition').textContent = ['Aveia com frutas', 'Iogurte e granola', 'Ovos mexidos', 'Smoothie verde'][randomInt(0,3)];
    }
    setInterval(updateHealthData, 7000); updateHealthData();

    // Chart.js: Gr√°fico de tend√™ncias de sa√∫de
    let healthChart;
    function renderHealthChart() {
      const ctx = document.getElementById('healthChart').getContext('2d');
      if (healthChart) healthChart.destroy();
      healthChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: Array.from({length: 7}, (_,i) => `Dia ${i+1}`),
          datasets: [{
            label: 'Batimentos (bpm)',
            data: Array.from({length: 7}, () => randomInt(60, 100)),
            borderColor: '#00fff7',
            backgroundColor: 'rgba(0,255,247,0.08)',
            tension: 0.3
          }]
        },
        options: {
          plugins: { legend: { labels: { color: '#67e8f9' } } },
          scales: {
            x: { ticks: { color: '#67e8f9' } },
            y: { ticks: { color: '#67e8f9' }, beginAtZero: false }
          }
        }
      });
    }
    renderHealthChart();

    // Overlay de Auditoria ISO 14971: Gr√°fico de risco em tempo real
    let riskChart;
    function toggleAudit() {
      const overlay = document.getElementById('auditOverlay');
      overlay.classList.toggle('active');
      if (overlay.classList.contains('active')) {
        setTimeout(renderRiskChart, 200);
      }
    }
    function renderRiskChart() {
      const ctx = document.getElementById('riskChart').getContext('2d');
      if (riskChart) riskChart.destroy();
      riskChart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ['Sensor Pele', 'Sensor Card√≠aco', 'Sensor Sono', 'Sensor Movimento'],
          datasets: [{
            label: 'Probabilidade de Falha (%)',
            data: [randomInt(1, 5), randomInt(2, 8), randomInt(1, 4), randomInt(1, 6)],
            backgroundColor: [
              'rgba(0,255,247,0.7)',
              'rgba(0,255,247,0.5)',
              'rgba(0,255,247,0.4)',
              'rgba(0,255,247,0.6)'
            ],
            borderColor: '#00fff7',
            borderWidth: 1
          }]
        },
        options: {
          plugins: { legend: { display: false } },
          scales: {
            x: { ticks: { color: '#67e8f9' } },
            y: { ticks: { color: '#67e8f9' }, beginAtZero: true, max: 10 }
          }
        }
      });
    }

    // Fun√ß√µes dos bot√µes principais (simula√ß√£o, sempre mencionando valida√ß√£o ISO)
    function scanSkin() {
      document.getElementById('result').innerHTML =
        `<h2 class="text-xl font-bold neon-text mb-2">An√°lise de Pele</h2>
        <p>Condi√ß√£o detectada: <b>${['Seca','Oleosa','Mista','Sens√≠vel'][randomInt(0,3)]}</b></p>
        <p>Recomenda√ß√£o: Hidrata√ß√£o intensiva e prote√ß√£o solar.</p>
        <p class="text-cyan-400 text-xs mt-2">An√°lise validada por ISO 62304</p>`;
    }
    function monitorVitals() {
      document.getElementById('result').innerHTML =
        `<h2 class="text-xl font-bold neon-text mb-2">Sinais Vitais</h2>
        <p>Batimento card√≠aco: <b>${randomInt(60,100)} bpm</b></p>
        <p>Press√£o arterial: <b>${randomInt(110,130)}/${randomInt(70,90)} mmHg</b></p>
        <p>Respira√ß√£o: <b>${randomInt(12,20)}/min</b></p>
        <p class="text-cyan-400 text-xs mt-2">Monitoramento validado por ISO 62304</p>`;
    }
    function guidedWorkout() {
      document.getElementById('result').innerHTML =
        `<h2 class="text-xl font-bold neon-text mb-2">Treino Guiado</h2>
        <p>Treino: <b>${['Pilates','Yoga','HIIT','Alongamento'][randomInt(0,3)]}</b></p>
        <p>Dura√ß√£o sugerida: 20 minutos</p>
        <p class="text-cyan-400 text-xs mt-2">Treino validado por ISO 62304</p>`;
    }
    function teleconsult() {
      document.getElementById('result').innerHTML =
        `<h2 class="text-xl font-bold neon-text mb-2">Teleconsulta</h2>
        <p>Assunto: <b>${['Check-up','Dermatologia','Nutri√ß√£o','Bem-estar'][randomInt(0,3)]}</b></p>
        <p>Resposta: Consulta virtual realizada com sucesso.</p>
        <p class="text-cyan-400 text-xs mt-2">Consulta validada por ISO 62304</p>`;
    }
    function generateReport() {
      document.getElementById('result').innerHTML =
        `<h2 class="text-xl font-bold neon-text mb-2">Relat√≥rio Semanal</h2>
        <p>Escaneamentos de pele: <b>${randomInt(2,7)}</b></p>
        <p>Monitoramentos vitais: <b>${randomInt(5,12)}</b></p>
        <p>Treinos realizados: <b>${randomInt(1,5)}</b></p>
        <p>Tend√™ncia de humor: <b>${['Positivo','Neutro','Estressado','Cansado'][randomInt(0,3)]}</b></p>
        <p class="text-cyan-400 text-xs mt-2">Relat√≥rio validado por ISO 62304</p>`;
    }
    function analyzeMood() {
      const mood = randomMood();
      document.getElementById('result').innerHTML =
        `<h2 class="text-xl font-bold neon-text mb-2">An√°lise de Humor</h2>
        <p>Humor detectado: <b>${mood.text}</b> ${mood.icon}</p>
        <p>Sugest√£o: Pratique mindfulness e mantenha rotina saud√°vel.</p>
        <p class="text-cyan-400 text-xs mt-2">An√°lise validada por ISO 62304</p>`;
    }
    // Relat√≥rio de Feedback (ISO/TR 20416) com localStorage criptografado (simulado)
    function generateFeedback() {
      const feedback = {
        semana: new Date().toISOString().slice(0,10),
        uso: randomInt(5,12),
        tendencia: ['Melhora','Est√°vel','Aten√ß√£o'][randomInt(0,2)],
        sugestao: ['Foque em hidrata√ß√£o','Aumente atividade f√≠sica','Monitore sono'][randomInt(0,2)]
      };
      // Simula√ß√£o de criptografia (btoa)
      localStorage.setItem('feedbackLog', btoa(JSON.stringify(feedback)));
      document.getElementById('result').innerHTML =
        `<h2 class="text-xl font-bold neon-text mb-2">Relat√≥rio de Feedback (ISO/TR 20416)</h2>
        <p>Semana: <b>${feedback.semana}</b></p>
        <p>Eventos de uso: <b>${feedback.uso}</b></p>
        <p>Tend√™ncia: <b>${feedback.tendencia}</b></p>
        <p>Sugest√£o: <b>${feedback.sugestao}</b></p>
        <p class="text-cyan-400 text-xs mt-2">Relat√≥rio salvo em localStorage criptografado</p>`;
    }
    // Suporte a voz (Web Speech API) para comandos ISO
    if ('SpeechRecognition' in window || 'webkitSpeechRecognition' in window) {
      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
      const recognition = new SpeechRecognition();
      recognition.lang = 'pt-BR';
      recognition.continuous = false;
      recognition.onresult = function(event) {
        const cmd = event.results[0][0].transcript.toLowerCase();
        if (cmd.includes('escaneamento') && cmd.includes('iso')) scanSkin();
        else if (cmd.includes('auditoria')) toggleAudit();
        else if (cmd.includes('relat√≥rio')) generateReport();
        else if (cmd.includes('feedback')) generateFeedback();
        else if (cmd.includes('sinais vitais')) monitorVitals();
        else if (cmd.includes('treino')) guidedWorkout();
        else if (cmd.includes('humor')) analyzeMood();
      };
      // Ativa reconhecimento de voz ao pressionar Ctrl+Shift+V
      document.addEventListener('keydown', e => {
        if (e.ctrlKey && e.shiftKey && e.key.toLowerCase() === 'v') {
          recognition.start();
          document.getElementById('result').innerHTML =
            '<p class=\"text-cyan-400\">Aguardando comando de voz ISO-conforme...</p>';
        }
      });
    }
    // Acessibilidade ARIA: foco nos tooltips dos badges ISO
    document.querySelectorAll('.badge-iso').forEach(badge => {
      badge.addEventListener('focus', function() {
        this.querySelector('.tooltip').style.display = 'block';
      });
      badge.addEventListener('blur', function() {
        this.querySelector('.tooltip').style.display = 'none';
      });
    });
  </script>
</body>
</html>