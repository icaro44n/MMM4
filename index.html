<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartMirror Health+ Pro | Futurista & ISO-compliant</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Font 'Inter' via Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <style>
        body { background: #fff; color: #111; }
        .glass { background: #fff; border-radius: 1.5rem; border: 1.5px solid #e5e7eb; box-shadow: 0 4px 24px 0 #0001; }
        .badge-iso { background: rgba(0,0,0,0.08); border: 1px solid #111; color: #111; border-radius: 0.5rem; padding: 0.2rem 0.7rem; font-size: 0.95rem; margin-right: 0.5rem; cursor: pointer; position: relative; transition: background 0.2s; }
        .badge-iso:hover .tooltip { display: block; }
        .tooltip { display: none; position: absolute; bottom: 120%; left: 50%; transform: translateX(-50%); background: #232323; color: #fff; padding: 0.5rem 1rem; border-radius: 0.5rem; font-size: 0.9rem; white-space: nowrap; z-index: 10; box-shadow: 0 2px 12px #1118; }
        .audit-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(10,30,40,0.92); z-index: 50; display: none; align-items: center; justify-content: center; flex-direction: column; animation: fadeIn 0.4s; }
        .audit-overlay.active { display: flex; }
        .blockchain-banner { background: linear-gradient(90deg, #111 0%, #232323 100%); color: #fff; font-weight: 600; border-radius: 0.7rem; padding: 0.5rem 1.2rem; margin-bottom: 1rem; box-shadow: 0 0 12px #1118; display: flex; align-items: center; gap: 0.7rem; font-size: 1.1rem; }
        .iso-footer { margin-top: 2rem; display: flex; align-items: center; justify-content: center; gap: 1rem; font-size: 0.95rem; color: #111; }
        .glass-btn { background: #111; border: none; color: #fff; border-radius: 1.5rem; padding: 0.7rem 1.5rem; font-weight: 600; margin-top: 0.5rem; margin-bottom: 0.5rem; transition: background 0.2s, color 0.2s; box-shadow: 0 2px 8px #1112; }
        .glass-btn:hover { background: #232323; color: #fff; }
        .iso-wearable { background: rgba(0,0,0,0.08); border: 1px solid #111; border-radius: 1rem; padding: 0.7rem 1.2rem; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.7rem; color: #111; font-size: 1.1rem; }
        @media (max-width: 900px) { .flex-col-md { flex-direction: column !important; align-items: stretch !important; } }
    </style>
</head>
<body class="antialiased text-gray-900">
    <div class="w-full min-h-screen flex items-center justify-center py-10 bg-white">
        <div class="flex flex-col lg:flex-row gap-12 items-start justify-center w-full max-w-7xl px-4">
            <!-- Logo Reflexa -->
            <div class="flex flex-col items-center mb-8 lg:mb-0">
                <img src="REflexa.png" alt="Logo Reflexa" class="w-80 max-w-xs mb-2" style="background:transparent;">
            </div>
            <!-- Conte√∫do principal pode ser adicionado aqui -->
        </div>
    </div>
    <!-- Overlay de Auditoria ISO 14971 -->
    <div id="auditOverlay" class="audit-overlay" aria-modal="true" role="dialog">
        <div class="glass p-8 rounded-2xl max-w-lg w-full flex flex-col items-center">
        </div>
    </div>
    <script>
        // Reconhecimento facial simples: ativa√ß√£o da c√¢mera
        let camStream = null;
        const video = document.getElementById('facecam');
        const btn = document.getElementById('toggleCamBtn');
        const statusDiv = document.getElementById('camStatus');
        let camActive = false;
        async function startCam() {
            try {
                camStream = await navigator.mediaDevices.getUserMedia({ video: true });
                video.srcObject = camStream;
                statusDiv.textContent = 'C√¢mera ativa. Olhe para a c√¢mera para reconhecimento facial.';
                btn.textContent = 'Parar C√¢mera';
                camActive = true;
            } catch (e) {
                statusDiv.textContent = 'Permiss√£o negada ou c√¢mera n√£o encontrada.';
            }
        }
        function stopCam() {
            if (camStream) {
                camStream.getTracks().forEach(track => track.stop());
                video.srcObject = null;
            }
            statusDiv.textContent = 'C√¢mera parada.';
            btn.textContent = 'Iniciar C√¢mera';
            camActive = false;
        }
        btn.addEventListener('click', () => {
            if (!camActive) startCam();
            else stopCam();
        });
        // Utilidades de dados randomizados e simula√ß√£o de conformidade ISO
        function randomInt(min, max) { return Math.floor(Math.random() * (max - min + 1)) + min; }
        function randomFloat(min, max, dec=1) { return (Math.random() * (max - min) + min).toFixed(dec); }
        function randomMood() {
            const moods = [
                {icon: 'üòä', text: 'Positivo'},
                {icon: 'üòê', text: 'Neutro'},
                {icon: 'üò∞', text: 'Estressado'},
                {icon: 'üò¥', text: 'Cansado'}
            ];
            return moods[randomInt(0, moods.length-1)];
        }
        // Rel√≥gio din√¢mico em tempo real
        function updateClock() {
            const now = new Date();
            document.getElementById('clock').textContent =
                now.toLocaleTimeString('pt-BR', {hour: '2-digit', minute: '2-digit', second: '2-digit'});
        }
        setInterval(updateClock, 1000); updateClock();

        // Simula√ß√£o de dados de sa√∫de e atualiza√ß√£o dos cards
        function updateHealthData() {
            document.getElementById('bpm').textContent = randomInt(60, 100);
            document.getElementById('variabilidade').textContent = ['Alta', 'M√©dia', 'Baixa'][randomInt(0,2)];
            document.getElementById('sleep').textContent = randomInt(6, 8) + 'h ' + randomInt(10, 59) + 'm';
            document.getElementById('deepSleep').textContent = randomInt(1, 3) + 'h ' + randomInt(0, 59) + 'm';
            const mood = randomMood();
            document.getElementById('moodIcon').textContent = mood.icon;
            document.getElementById('moodText').textContent = mood.text;
            document.getElementById('nutrition').textContent = ['Aveia com frutas', 'Iogurte e granola', 'Ovos mexidos', 'Smoothie verde'][randomInt(0,3)];
        }
        setInterval(updateHealthData, 7000); updateHealthData();

        // Chart.js: Gr√°fico de tend√™ncias de sa√∫de
        let healthChart;
        function renderHealthChart() {
            const ctx = document.getElementById('healthChart').getContext('2d');
            if (healthChart) healthChart.destroy();
            healthChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: Array.from({length: 7}, (_,i) => `Dia ${i+1}`),
                    datasets: [{
                        label: 'Batimentos (bpm)',
                        data: Array.from({length: 7}, () => randomInt(60, 100)),
                        borderColor: '#60a5fa',
                        backgroundColor: 'rgba(96, 165, 250, 0.2)',
                        tension: 0.3
                    }]
                },
                options: {
                    plugins: { legend: { labels: { color: '#d1d5db' } } },
                    scales: {
                        x: { ticks: { color: '#9ca3af' }, grid: { color: 'rgba(255,255,255,0.1)' } },
                        y: { ticks: { color: '#9ca3af' }, beginAtZero: false, grid: { color: 'rgba(255,255,255,0.1)' } }
                    }
                }
            });
        }
        renderHealthChart();

        // Overlay de Auditoria ISO 14971: Gr√°fico de risco em tempo real
        let riskChart;
        function toggleAudit() {
            const overlay = document.getElementById('auditOverlay');
            overlay.classList.toggle('active');
            if (overlay.classList.contains('active')) {
                setTimeout(renderRiskChart, 200);
            }
        }
        function renderRiskChart() {
            const ctx = document.getElementById('riskChart').getContext('2d');
            if (riskChart) riskChart.destroy();
            riskChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Sensor Pele', 'Sensor Card√≠aco', 'Sensor Sono', 'Sensor Movimento'],
                    datasets: [{
                        label: 'Probabilidade de Falha (%)',
                        data: [randomInt(1, 5), randomInt(2, 8), randomInt(1, 4), randomInt(1, 6)],
                        backgroundColor: [
                            'rgba(96, 165, 250, 0.7)',
                            'rgba(96, 165, 250, 0.5)',
                            'rgba(96, 165, 250, 0.4)',
                            'rgba(96, 165, 250, 0.6)'
                        ],
                        borderColor: '#60a5fa',
                        borderWidth: 1
                    }]
                },
                options: {
                    plugins: { legend: { display: false } },
                    scales: {
                        x: { ticks: { color: '#d1d5db' }, grid: { color: 'rgba(255,255,255,0.1)' } },
                        y: { ticks: { color: '#d1d5db' }, beginAtZero: true, max: 10, grid: { color: 'rgba(255,255,255,0.1)' } }
                    }
                }
            });
        }
        // Fun√ß√µes dos bot√µes principais (simula√ß√£o, sempre mencionando valida√ß√£o ISO)
        function scanSkin() {
            document.getElementById('result').innerHTML =
                `<h2 class="text-xl font-bold glow-text mb-2">An√°lise de Pele</h2>
                <p>Condi√ß√£o detectada: <b>${['Seca','Oleosa','Mista','Sens√≠vel'][randomInt(0,3)]}</b></p>
                <p>Recomenda√ß√£o: Hidrata√ß√£o intensiva e prote√ß√£o solar.</p>
                <p class="text-blue-400 text-xs mt-2">An√°lise validada por ISO 62304</p>`;
        }
        function monitorVitals() {
            document.getElementById('result').innerHTML =
                `<h2 class="text-xl font-bold glow-text mb-2">Sinais Vitais</h2>
                <p>Batimento card√≠aco: <b>${randomInt(60,100)} bpm</b></p>
                <p>Press√£o arterial: <b>${randomInt(110,130)}/${randomInt(70,90)} mmHg</b></p>
                <p>Respira√ß√£o: <b>${randomInt(12,20)}/min</b></p>
                <p class="text-blue-400 text-xs mt-2">Monitoramento validado por ISO 62304</p>`;
        }
        function guidedWorkout() {
            document.getElementById('result').innerHTML =
                `<h2 class="text-xl font-bold glow-text mb-2">Treino Guiado</h2>
                <p>Treino: <b>${['Pilates','Yoga','HIIT','Alongamento'][randomInt(0,3)]}</b></p>
                <p>Dura√ß√£o sugerida: 20 minutos</p>
                <p class="text-blue-400 text-xs mt-2">Treino validado por ISO 62304</p>`;
        }
        function teleconsult() {
            document.getElementById('result').innerHTML =
                `<h2 class="text-xl font-bold glow-text mb-2">Teleconsulta</h2>
                <p>Assunto: <b>${['Check-up','Dermatologia','Nutri√ß√£o','Bem-estar'][randomInt(0,3)]}</b></p>
                <p>Resposta: Consulta virtual realizada com sucesso.</p>
                <p class="text-blue-400 text-xs mt-2">Consulta validada por ISO 62304</p>`;
        }
        function generateReport() {
            document.getElementById('result').innerHTML =
                `<h2 class="text-xl font-bold glow-text mb-2">Relat√≥rio Semanal</h2>
                <p>Escaneamentos de pele: <b>${randomInt(2,7)}</b></p>
                <p>Monitoramentos vitais: <b>${randomInt(5,12)}</b></p>
                <p>Treinos realizados: <b>${randomInt(1,5)}</b></p>
                <p>Tend√™ncia de humor: <b>${['Positivo','Neutro','Estressado','Cansado'][randomInt(0,3)]}</b></p>
                <p class="text-blue-400 text-xs mt-2">Relat√≥rio validado por ISO 62304</p>`;
        }
        function analyzeMood() {
            const mood = randomMood();
            document.getElementById('result').innerHTML =
                `<h2 class="text-xl font-bold glow-text mb-2">An√°lise de Humor</h2>
                <p>Humor detectado: <b>${mood.text}</b> ${mood.icon}</p>
                <p>Sugest√£o: Pratique mindfulness e mantenha rotina saud√°vel.</p>
                <p class="text-blue-400 text-xs mt-2">An√°lise validada por ISO 62304</p>`;
        }
        function generateFeedback() {
            const feedback = {
                semana: new Date().toISOString().slice(0,10),
                uso: randomInt(5,12),
                tendencia: ['Melhora','Est√°vel','Aten√ß√£o'][randomInt(0,2)],
                sugestao: ['Foque em hidrata√ß√£o','Aumente atividade f√≠sica','Monitore sono'][randomInt(0,2)]
            };
            document.getElementById('result').innerHTML =
                `<h2 class="text-xl font-bold glow-text mb-2">Relat√≥rio de Feedback (ISO/TR 20416)</h2>
                <p>Semana: <b>${feedback.semana}</b></p>
                <p>Eventos de uso: <b>${feedback.uso}</b></p>
                <p>Tend√™ncia: <b>${feedback.tendencia}</b></p>
                <p>Sugest√£o: <b>${feedback.sugestao}</b></p>
                <p class="text-blue-400 text-xs mt-2">Dados processados para auditoria</p>`;
        }
        // Suporte a voz (Web Speech API) para comandos ISO
        if ('SpeechRecognition' in window || 'webkitSpeechRecognition' in window) {
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            const recognition = new SpeechRecognition();
            recognition.lang = 'pt-BR';
            recognition.continuous = false;
            recognition.onresult = function(event) {
                const cmd = event.results[0][0].transcript.toLowerCase();
                if (cmd.includes('escaneamento') && cmd.includes('iso')) scanSkin();
                else if (cmd.includes('auditoria')) toggleAudit();
                else if (cmd.includes('relat√≥rio')) generateReport();
                else if (cmd.includes('feedback')) generateFeedback();
                else if (cmd.includes('sinais vitais')) monitorVitals();
                else if (cmd.includes('treino')) guidedWorkout();
                else if (cmd.includes('humor')) analyzeMood();
            };
            document.addEventListener('keydown', e => {
                if (e.ctrlKey && e.shiftKey && e.key.toLowerCase() === 'v') {
                    recognition.start();
                    document.getElementById('result').innerHTML =
                        '<p class="text-blue-400">Aguardando comando de voz ISO-conforme...</p>';
                }
            });
        }
        // Acessibilidade ARIA: foco nos tooltips dos badges ISO
        document.querySelectorAll('.badge-iso').forEach(badge => {
            badge.addEventListener('focus', function() {
                this.querySelector('.tooltip').style.display = 'block';
            });
            badge.addEventListener('blur', function() {
                this.querySelector('.tooltip').style.display = 'none';
            });
        });
    </script>
</body>
</html>